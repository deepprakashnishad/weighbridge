<div class="container" fxLayout="column" fxLayoutGap="4px">
  <div class="container" [ngClass]="{'red': weighment.weighmentType === 'inbound', 'green' : weighment.weighmentType.indexOf('outbound')>-1}" fxLayout="column" fxLayoutGap="8px">
    <div fxLayout fxLayoutAlign="space-between center">
      <mat-radio-group [(ngModel)]="weighment.weighmentType" aria-label="Select weightment type" fxLayout fxLayoutGap="32px" fxLayoutAlign="start">
        <mat-radio-button value="inbound">Inbound(Purchase)</mat-radio-button>
        <mat-radio-button value="outbound_export">Outbound(Export)</mat-radio-button>
        <mat-radio-button value="outbound_domestic">Outbound(Domestic)</mat-radio-button>
        <mat-radio-button value="outbound_subcontract">Outbound(Sub-contract Dispatch)</mat-radio-button>
        <mat-radio-button value="others">Others</mat-radio-button>
      </mat-radio-group>
      <h3>Date - {{currDate.getDate()}} / {{currDate.getMonth()}} / {{currDate.getFullYear()}}</h3>
    </div>

    <div fxLayout fxLayoutAlign="start start" fxLayoutGap="16px">
      <mat-form-field appearance="outline">
        <mat-label>Vehicle No</mat-label>
        <input matInput #vehicleCntl [(ngModel)]="weighment.vehicleNo" name="cntlRequestId"
               (keyup.enter)="parseQRString(weighment.vehicleNo)"
               (blur)="parseQRString(weighment.vehicleNo)" tabindex="0" />
      </mat-form-field>
      <mat-form-field appearance="outline" *ngIf="weighment.weighmentType!=='inbound' && weighment.weighmentType!=='others'">
        <mat-label>Request Id</mat-label>
        <input matInput [(ngModel)]="weighment.reqId" name="cntlRequestId"
               (keyup.enter)="parseQRString(weighment.reqId)"
               (blur)="parseQRString(weighment.reqId)" />
      </mat-form-field>
      <mat-form-field appearance="outline" *ngIf="weighment.weighmentType!=='inbound' && weighment.weighmentType!=='others'">
        <mat-label>Gate Pass No</mat-label>
        <input matInput [(ngModel)]="weighment.gatePassNo" name="cntlGatePassNo"
               (keyup.enter)="parseQRString(weighment.gatePassNo)"
               (blur)="parseQRString(weighment.gatePassNo)" />
      </mat-form-field>
      <mat-form-field appearance="outline" *ngIf="weighment.weighmentType==='inbound'">
        <mat-label>Scroll No</mat-label>
        <input matInput maxlength="1" [(ngModel)]="weighment.scrollNo" name="cntlscrollNo"
               (keyup.enter)="parseQRString(weighment.scrollNo)"
               (blur)="parseQRString(weighment.scrollNo)" />
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>RST No</mat-label>
        <input matInput [(ngModel)]="weighment.rstNo" name="cntlRSTNo"
               (keyup.enter)="parseQRString(weighment.rstNo)"
               (blur)="parseQRString(weighment.rstNo)" readonly disabled />
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Weighment Slip No</mat-label>
        <input matInput [(ngModel)]="weighmentDetail.id" name="cntlWeighSlipNo" disabled readonly tabindex="-1" />
      </mat-form-field>
    </div>
    <div fxLayout fxLayoutAlign="start center" fxLayoutGap="16px">
      <app-tag-selector [tagTypeId]="1" [selectedTag]="weighmentDetail.supplier" [title]="'Supplier'" (optionSelected)="supplierSelected($event)"></app-tag-selector>
      <app-tag-selector #transporterCntl [tagTypeId]="3" [selectedTag]="transporter" [title]="'Transporter'" (optionSelected)="transporterSelected($event)"></app-tag-selector>
      <!--<mat-form-field appearance="outline">
    <mat-label>Transporter Code</mat-label>
    <input matInput [(ngModel)]="weighment.transporterCode" name="cntlTransporterCode"
           (keyup.enter)="parseQRString(weighment.transporterCode)"
           (blur)="parseQRString(weighment.transporterCode)" />
  </mat-form-field>
  <mat-form-field appearance="outline">
    <mat-label>Transporter Name</mat-label>
    <input matInput [(ngModel)]="weighment.transporterName" name="cntlTransporterName"
           (keyup.enter)="parseQRString(weighment.transporterName)"
           (blur)="parseQRString(weighment.transporterName)" />
  </mat-form-field>-->
      <mat-form-field appearance="outline" fxFlex>
        <mat-label>Miscellenous</mat-label>
        <input matInput [(ngModel)]="weighmentDetail.remark" name="cntlMisc"
               (keyup.enter)="parseQRString(weighmentDetail.remark)"
               (blur)="parseQRString(weighmentDetail.remark)" />
      </mat-form-field>
    </div>
    <div fxLayout fxLayoutAlign="start center" fxLayoutGap="16px">
      <app-tag-selector [tagTypeId]="2" [selectedTag]="weighmentDetail.material" [title]="'Material*'" (optionSelected)="materialSelected($event)"></app-tag-selector>
      <mat-form-field appearance="outline" class="weight">
        <mat-label>First Weight</mat-label>
        <input matInput [(ngModel)]="weighmentDetail.firstWeight" name="cntlFirstWt" readonly tabindex="-1" />
      </mat-form-field>
      <mat-form-field appearance="outline" class="weight">
        <mat-label>Second Weight</mat-label>
        <input matInput [(ngModel)]="weighmentDetail.secondWeight" name="cntlSecondWt" readonly tabindex="-1" />
      </mat-form-field>
      <mat-form-field appearance="outline" class="weight">
        <mat-label>Net Weight</mat-label>
        <input matInput [(ngModel)]="weighmentDetail.netWeight" name="cntlNetWeight" readonly tabindex="-1"/>
      </mat-form-field>
    </div>
    <div class="full-width" fxLayout fxLayoutGap="32px" fxLayoutAlign="space-between center">
      <button mat-raised-button class="capture-button" color="primary"
              *ngIf="selectedIndicator && selectedIndicator['stringType']!=='polling'"
              [disabled]="!isWeightStable || weighment.status==='complete'" (click)="capture()">
        Capture
      </button>
      <button mat-raised-button class="capture-button" color="primary"
              *ngIf="selectedIndicator && selectedIndicator['stringType']==='polling'" (click)="getWeight()">
        Capture
      </button>
      <div fxLayout fxLayoutGap="32px" fxLayoutAlign="center center">
        <mat-checkbox *ngIf="weighmentDetail.secondWeight && weighmentDetail.firstWeight" [(ngModel)]="isComplete">Is Complete</mat-checkbox>
        <!--<button *ngIf="weighmentDetail.id"
            mat-raised-button color="accent"
            (click)="save('complete')">
      Save Complete Weighment
    </button>-->
        <button mat-raised-button color="primary" (click)="save()">Save</button>
        <button mat-raised-button color="error" (click)="reset()">Reset</button>
      </div>
    </div>
  </div>
  <app-weighment-details [weighmentDetails]="weighment.weighmentDetails"></app-weighment-details>
</div>
